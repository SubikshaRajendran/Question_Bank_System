<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Details - Question Bank System</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <nav>
        <div class="logo">QB Student</div>
        <ul>
            <li><a href="registered_courses.html">Back to My Courses</a></li>
        </ul>
    </nav>

    <div class="container" style="margin-top: 4rem; text-align: center;">
        <div class="card" style="padding: 3rem;">
            <h2 id="courseTitle" style="font-size: 2.5rem; margin-bottom: 1rem;">Loading...</h2>
            <p id="courseDesc" style="font-size: 1.2rem; color: #4b5563; margin-bottom: 2rem;"></p>

            <button class="btn" onclick="goToQuestions()">View Questions</button>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        if (localStorage.getItem('role') !== 'student') {
            window.location.href = 'login_selection.html';
        }

        const urlParams = new URLSearchParams(window.location.search);
        const courseId = urlParams.get('id');

        if (!courseId) {
            window.location.href = 'registered_courses.html';
        }

        async function loadCourse() {
            const data = await getCourse(courseId);
            if (!data.course) {
                alert('Course not found');
                window.location.href = 'registered_courses.html';
                return;
            }

            document.getElementById('courseTitle').textContent = data.course.title;
            document.getElementById('courseDesc').textContent = data.course.description || 'No description.';
        }

        function goToQuestions() {
            // Redirect to the question view page (reusing course_view.html logic but maybe rename later)
            window.location.href = `course_view.html?id=${courseId}`;
        }

        loadCourse();
    </script>
</body>

</html>